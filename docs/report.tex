\documentclass[a4paper,12pt]{report}

\usepackage[italian]{babel}

\title{\textbf{PyChat}\\Progetto di Programmazione di reti\\\textit{Università di Bologna}}
\author{Martin Tomassi; 0001077737\\Francesco Pazzaglia; 0001077423\\Luca Casadei; 0001069237}
\date{\today}

\begin{document}

\maketitle
\tableofcontents

\chapter{Introduzione}
Questa è la documentazione del progetto di Programmazione di Reti relativo alla Traccia 1: \textit{Sistema di Chat Client-Server} in Python. Il progetto mira a implementare una chat che permetta a più utenti di connettersi a un server centrale e di comunicare tra loro in una chatroom condivisa.
\\
Il progetto è suddiviso in due componenti principali: il \textbf{client} e il \textbf{server}.
\\
Il server si occupa di gestire le connessioni dei client e di instradare i messaggi in modalità broadcast all'interno della chat. Il client, invece, permette agli utenti di connettersi al server tramite il protocollo TCP, di inviare messaggi e di visualizzare i messaggi ricevuti dagli altri utenti nella chatroom. Quando un client si connette al server, può vedere solo i messaggi inviati dopo che la connessione è stata stabilita; i messaggi precedenti non vengono "salvati" nel server.
\\
Nell'implementazione del progetto, sono state adottate diverse scelte architetturali e di progettazione. Ad esempio, la comunicazione tra client e server avviene attraverso il protocollo TCP, scelto per la sua affidabilità nella trasmissione dei dati. Inoltre, l'utilizzo dei thread consente di gestire in modo concorrente l'invio e la ricezione dei messaggi sui due lati della connessione, garantendo un'esperienza fluida agli utenti.
\\
Nel codice del client, è stata implementata una logica per la gestione dei thread separati per l'invio e la ricezione dei messaggi, in modo che l'utente possa scrivere e leggere contemporaneamente senza bloccare il programma. 
\\
D'altra parte, nel codice del server, è stata implementata la logica per gestire le connessioni multiple dei client e la distribuzione dei messaggi ricevuti a tutti i client connessi.
\\
In definitiva, il progetto si propone di offrire una soluzione robusta e affidabile per consentire a più utenti di comunicare in tempo reale tramite una chatroom condivisa.

\chapter{Client}
Il client utilizza un approccio connection-oriented IPv4 attraverso il modulo \textit{socket} di Python per stabilire una connessione con il server della chatroom. Prima di avviare l'applicazione, l'utente deve specificare l'indirizzo IP del server e un nome utente univoco, che servirà a identificarlo all'interno della chatroom. Questi parametri vengono passati come argomenti al momento dell'esecuzione del client.
\\
Una volta avviato, il client crea un socket e tenta di stabilire una connessione con il server utilizzando l'indirizzo IP e la porta specificati. Se la connessione viene stabilita con successo, il client invia il nome utente al server per identificarsi.
\\
Dopo la connessione, il client avvia due thread separati per gestire la trasmissione e la ricezione dei messaggi. 
\\
Il thread di trasmissione consente all'utente di digitare un messaggio dall'input del terminale e inviarlo al server tramite il socket. Prima di inviare il messaggio, viene applicata la codifica UTF-8 per garantire la compatibilità con caratteri speciali come le lettere accentate.
\\
Il thread di ricezione rimane in attesa di messaggi inviati dal server e li decodifica utilizzando sempre la codifica UTF-8 per garantire una corretta visualizzazione. Quando arriva un nuovo messaggio, il client lo visualizza sulla console.
\\
L'interfaccia utente fornisce all'utente le istruzioni necessarie per interagire con l'applicazione, inclusi i comandi per inviare messaggi e le notifiche sullo stato dell'applicazione, ad esempio l'avviso di CTRL-C per terminare l'esecuzione.
\\
Inoltre, il client è dotato di comandi configurati dal server, tra cui il comando /list per tenere traccia degli utenti online nella chatroom, il comando /pvt per inviare messaggi privati a un client specifico e il comando /cmds per visualizzare la lista dei comandi disponibili.
\chapter{Server}
\section{Introduzione}
Questo documento fornisce la documentazione per il Server della Chatroom, sviluppato come parte del progetto di Programmazione di Reti. Il server è progettato per consentire agli utenti di connettersi e comunicare tramite una chatroom utilizzando il protocollo TCP/IP.
\\
Il server è implementato in modo tale da essere continuamente in grado di ricevere pacchetti da ogni dispositivo collegato. Per gestire simultaneamente le connessioni multiple, il server utilizza un approccio basato su thread, con un thread separato per ciascuna connessione attiva.
\\
Quando arriva un nuovo messaggio da inviare, il server verifica l'effettiva presenza del destinatario controllando una tabella interna degli utenti connessi.
\\
Se il destinatario è online, il server inoltra il messaggio al destinatario appropriato. Tuttavia, se il destinatario non è presente nel registro interno del server, viene inviata una risposta al mittente specificando che l'utente richiesto non è connesso o non è stato trovato.
\section{Funzionalità Principali}
Il Server della Chatroom offre le seguenti funzionalità principali:
\begin{itemize}
	\item Gestione delle connessioni dei client.
	\item Trasmissione di messaggi broadcast a tutti i client connessi.
	\item Invio di messaggi privati tra client specifici.
	\item Fornitura della lista degli utenti connessi.
	\item Fornitura della lista dei comandi disponibili.
\end{itemize}
\section{Implementazione}
Il server è implementato in Python e utilizza il modulo \texttt{socketserver} per gestire le connessioni dei client. Il server mantiene una lista dei client connessi e gestisce la trasmissione dei messaggi tra di essi.
\subsection{Struttura del Codice}
Il codice del server è suddiviso nelle seguenti sezioni:
\begin{itemize}
	\item \textbf{Gestione delle Connessioni}: Il server accetta le connessioni dei client e li aggiunge alla lista dei client connessi.
	\item \textbf{Trasmissione dei Messaggi}: Il server gestisce la trasmissione dei messaggi broadcast e privati tra i client connessi.
	\item \textbf{Gestione dei Comandi}: Il server supporta diversi comandi che consentono agli utenti di interagire con il server.
\end{itemize}
\section{Utilizzo}
Per avviare il server, eseguire il file Python \texttt{server.py}. Il server rimarrà in ascolto per le connessioni dei client sulla porta specificata nel file di configurazione.
\subsection{Comandi Supportati}
Il server supporta i seguenti comandi:
\begin{itemize}
	\item \texttt{/list}: Fornisce la lista degli utenti connessi alla chatroom.
	\item \texttt{/pvt}: Consente di inviare un messaggio privato a un altro utente.
	\item \texttt{/cmds}: Fornisce la lista dei comandi disponibili.
\end{itemize}

\end{document}
